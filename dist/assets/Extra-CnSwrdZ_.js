const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-N3-yNM-x.js","assets/vendor-CDaM45aE.js","assets/firebase-oRQd-T1V.js","assets/router-ClepU2oc.js","assets/index-CQfFV5PZ.css"])))=>i.map(i=>d[i]);
import{j as e,q as z,_ as B}from"./index-N3-yNM-x.js";import{r as $,b as S}from"./vendor-CDaM45aE.js";import{S as A}from"./Section-D1bpE2En.js";import{e as D}from"./format-DAEZv7Mi.js";function F({value:a=[],onChange:c,T:d}){const t=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],x=m=>{const h=a.includes(m);c(h?a.filter(s=>s!==m):[...a,m].sort((s,n)=>s-n))};return e.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((m,h)=>e.jsx("button",{type:"button",onClick:()=>x(h),className:`px-2 h-6 rounded-md text-xs ring-1 transition-all ${a.includes(h)?"bg-emerald-500 text-black ring-emerald-500/60":`${d.ghostRing} ${d.cardBg}`}`,children:m},h))})}function _({slot:a,onUpdate:c,onRemove:d,T:t}){const x=s=>String(s).padStart(2,"0"),m=(s="09:00")=>{const n=/^(\d{1,2}):(\d{2})$/.exec(String(s).trim());if(!n)return"09:00";const u=Math.min(23,Math.max(0,Number(n[1]||0))),r=Math.min(59,Math.max(0,Number(n[2]||0)));return`${x(u)}:${x(r)}`},h=s=>{const n=(Number(s)||0)*1.5;return D(n/4)};return e.jsxs("div",{className:`relative rounded-lg p-3 ${t.name==="dark"?`${t.cardBg} ${t.border}`:"bg-emerald-50/50 ring-1 ring-emerald-200"}`,children:[e.jsx("button",{type:"button",className:"absolute top-2 right-2 text-rose-500 text-xs hover:underline z-10",onClick:d,title:"Rimuovi fascia",children:"✕"}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:`text-xs ${t.subtext} mb-1`,children:"Nome fascia"}),e.jsx("input",{value:a.label||"",onChange:s=>c({label:s.target.value}),className:t.input,placeholder:"Es. Mattutina, Serale, Peak"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:`text-xs ${t.subtext} mb-1`,children:"€/ora"}),e.jsx("input",{type:"number",min:"0",step:"0.5",value:a.eurPerHour??0,onChange:s=>c({eurPerHour:Number(s.target.value)||0}),className:t.input})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:`text-xs ${t.subtext} mb-1`,children:"Ora inizio"}),e.jsx("input",{type:"time",value:m(a.from),onChange:s=>c({from:m(s.target.value)}),className:t.input})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:`text-xs ${t.subtext} mb-1`,children:"Ora fine"}),e.jsx("input",{type:"time",value:m(a.to),onChange:s=>c({to:m(s.target.value)}),className:t.input})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${t.subtext} mb-2 block`,children:"Giorni attivi"}),e.jsx(F,{value:Array.isArray(a.days)?a.days:[],onChange:s=>c({days:s}),T:t})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`promo-${a.id||"new"}`,checked:!!a.isPromo,onChange:s=>c({isPromo:s.target.checked}),className:"w-4 h-4 text-yellow-600 rounded focus:ring-yellow-500"}),e.jsxs("label",{htmlFor:`promo-${a.id||"new"}`,className:"text-sm flex items-center gap-1",children:["🏷️ Fascia Promo",a.isPromo&&e.jsx("span",{className:"ml-1 text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded",children:"PROMO"})]})]})]}),e.jsx("div",{className:"flex lg:justify-end",children:e.jsxs("div",{className:`flex-shrink-0 p-3 rounded-lg ring-1 bg-emerald-100/50 ${t.border} text-center`,children:[e.jsx("div",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-300 mb-1",children:"90min/4 persone"}),e.jsxs("div",{className:"text-lg font-bold text-emerald-800 dark:text-emerald-200",children:[h(a.eurPerHour),"€"]}),e.jsx("div",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:"per persona"})]})})]})]})}function H({court:a,onUpdate:c,onRemove:d,T:t}){const[x,m]=$.useState(!1),h=()=>{const r={id:Date.now().toString(),label:"Nuova fascia",eurPerHour:25,from:"08:00",to:"12:00",days:[1,2,3,4,5]};c({timeSlots:[...a.timeSlots||[],r]})},s=(r,g)=>{const b=(a.timeSlots||[]).map((f,P)=>P===r?{...f,...g}:f);c({timeSlots:b})},n=r=>{const g=(a.timeSlots||[]).filter((b,f)=>f!==r);c({timeSlots:g})},u=()=>{c({hasHeating:!a.hasHeating})};return e.jsxs("div",{className:`rounded-xl ${t.border} ${t.cardBg} overflow-hidden transition-all`,children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50/50 dark:hover:bg-gray-800/50 transition-colors",onClick:()=>m(!x),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"🎾"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-lg",children:a.name}),e.jsxs("div",{className:`text-sm ${t.subtext}`,children:[(a.timeSlots||[]).length," fasce orarie configurate",a.hasHeating&&e.jsx("span",{className:"ml-1 text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded",children:"🔥 Riscaldamento"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:`text-sm px-3 py-1 rounded transition-all ${x?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:r=>{r.stopPropagation(),m(!x)},children:x?"📝 Chiudi":"⚙️ Configura"}),e.jsx("button",{type:"button",className:"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 px-2 py-1 rounded text-sm transition-colors",onClick:r=>{r.stopPropagation(),d()},children:"🗑️"})]})]})}),x&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50/30 dark:bg-gray-800/30",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"⚙️"}),"Configurazioni Campo"]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${t.subtext} mb-1 block`,children:"Nome Campo"}),e.jsx("input",{value:a.name||"",onChange:r=>c({name:r.target.value}),className:t.input,placeholder:"Es. Campo 1 - Centrale"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!a.hasHeating,onChange:u,className:"accent-orange-500"}),e.jsx("span",{className:"text-sm",children:"🔥 Riscaldamento"})]})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx("span",{children:"🕐"}),"Fasce Orarie e Prezzi"]}),e.jsx("button",{type:"button",className:`${t.btnGhost} text-sm`,onClick:h,children:"+ Aggiungi Fascia"})]}),e.jsx("div",{className:"space-y-3",children:(a.timeSlots||[]).length===0?e.jsxs("div",{className:`text-center py-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg ${t.subtext}`,children:[e.jsx("div",{className:"text-2xl mb-2",children:"🕐"}),e.jsx("div",{className:"text-sm",children:"Nessuna fascia oraria configurata"}),e.jsx("div",{className:"text-xs mt-1",children:"Aggiungi almeno una fascia per attivare il campo"})]}):(a.timeSlots||[]).map((r,g)=>e.jsx(_,{slot:r,onUpdate:b=>s(g,b),onRemove:()=>n(g),T:t},r.id||g))})]})]})]})}function I({courts:a=[],onChange:c,T:d}){const[t,x]=$.useState(""),m=()=>{if(!t.trim())return;const n={id:Date.now().toString(),name:t.trim(),hasHeating:!1,timeSlots:[]};c([...a,n]),x("")},h=(n,u)=>{const r=a.map((g,b)=>b===n?{...g,...u}:g);c(r)},s=n=>{confirm("Rimuovere il campo? Tutte le configurazioni e prenotazioni collegate saranno perse.")&&c(a.filter((u,r)=>r!==n))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-xl ${d.border} ${d.cardBg} p-4`,children:[e.jsx("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:"🏟️ Gestione Campi Avanzata"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{value:t,onChange:n=>x(n.target.value),onKeyDown:n=>n.key==="Enter"&&m(),className:`${d.input} w-full`,placeholder:"Es. Campo 4 - Centrale (Coperto)"})}),e.jsx("button",{type:"button",className:`${d.btnPrimary} w-full sm:w-auto px-6`,onClick:m,disabled:!t.trim(),children:"➕ Aggiungi Campo"})]}),e.jsx("div",{className:`text-xs ${d.subtext} mt-2`,children:"I campi saranno espandibili per configurare fasce orarie, prezzi e opzioni specifiche"})]}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsxs("div",{className:`text-center py-12 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl ${d.cardBg}`,children:[e.jsx("div",{className:"text-4xl mb-4",children:"🏟️"}),e.jsx("h4",{className:"font-medium text-lg mb-2",children:"Nessun campo configurato"}),e.jsx("p",{className:`text-sm ${d.subtext} mb-4`,children:"Aggiungi il primo campo per iniziare a configurare fasce orarie e prezzi personalizzati"})]}):a.map((n,u)=>e.jsx(H,{court:n,onUpdate:r=>h(u,r),onRemove:()=>s(u),T:d},n.id||u))}),a.length>0&&e.jsxs("div",{className:`rounded-xl ${d.border} ${d.cardBg} p-4`,children:[e.jsx("h4",{className:"font-medium mb-3 flex items-center gap-2",children:"📊 Riepilogo Configurazioni"}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:a.length}),e.jsx("div",{className:d.subtext,children:"Campi Totali"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.reduce((n,u)=>n+(u.timeSlots||[]).length,0)}),e.jsx("div",{className:d.subtext,children:"Fasce Configurate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a.reduce((n,u)=>n+(u.timeSlots||[]).filter(r=>r.isPromo).length,0)}),e.jsx("div",{className:d.subtext,children:"Fasce Promo"})]})]})]})]})}function V({state:a,setState:c,derived:d,leagueId:t,setLeagueId:x,clubMode:m,setClubMode:h,T:s}){const[n,u]=S.useState(""),[r,g]=$.useState(""),[b,f]=$.useState(()=>{try{return sessionStorage.getItem("ml-extra-unlocked")==="1"}catch{return!1}}),[P,L]=$.useState(""),E=l=>{c(o=>({...o,courts:l}))},C=(a==null?void 0:a.bookingConfig)||z(),[j,N]=$.useState(()=>({...C}));if($.useEffect(()=>{N(l=>{try{const o=JSON.stringify(l),y=JSON.stringify(C);return o===y?{...C}:l}catch{return l}})},[a==null?void 0:a.bookingConfig]),!a)return e.jsx(A,{title:"Extra – Impostazioni",T:s,children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-2xl mb-2",children:"⏳"}),e.jsx("div",{className:`text-sm ${s.subtext}`,children:"Caricamento in corso..."})]})});const i=l=>{var o;if((o=l==null?void 0:l.preventDefault)==null||o.call(l),r==="Paris2025"){f(!0);try{sessionStorage.setItem("ml-extra-unlocked","1")}catch{}}else alert("Password errata")},p=()=>{f(!1),g("");try{sessionStorage.removeItem("ml-extra-unlocked")}catch{}},v=()=>{let l=j.defaultDurations;typeof l=="string"&&(l=l.split(",").map(y=>Number(y.trim())).filter(y=>!Number.isNaN(y)&&y>0));const o={...j,slotMinutes:Math.max(5,Number(j.slotMinutes)||30),dayStartHour:Math.min(23,Math.max(0,Number(j.dayStartHour)||8)),dayEndHour:Math.min(24,Math.max(1,Number(j.dayEndHour)||23)),defaultDurations:l&&l.length?l:[60,90,120]};c(y=>({...y,bookingConfig:o})),alert("Parametri salvati!")},k=()=>N(z());j.pricing||z().pricing;const w=j.addons||z().addons;return e.jsxs(A,{title:"Extra – Impostazioni",T:s,children:[b?e.jsx("div",{className:`rounded-2xl ${s.cardBg} ${s.border} p-4 mb-6`,children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"🎛️"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-lg",children:"Modalità Circolo"}),e.jsx("div",{className:`text-sm ${s.subtext}`,children:m?"✅ Attiva — le tab amministrative sono visibili":"❌ Disattiva — solo Classifica e Statistiche sono visibili"})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:m?e.jsx("button",{type:"button",className:`${s.btnGhost} flex-1 sm:flex-none`,onClick:()=>h(!1),children:"🔒 Disattiva Modalità Circolo"}):e.jsx("button",{type:"button",className:`${s.btnPrimary} flex-1 sm:flex-none`,onClick:()=>h(!0),children:"🚀 Attiva Modalità Circolo"})})]})}):e.jsx("div",{className:`rounded-2xl ${s.cardBg} ${s.border} p-4 mb-6`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🔐"}),e.jsx("div",{className:"font-semibold mb-2",children:"Modalità Circolo"}),e.jsx("div",{className:`text-sm ${s.subtext}`,children:"Sblocca il pannello per gestire la Modalità Circolo e altre impostazioni avanzate."})]})}),b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`rounded-2xl ${s.cardBg} ${s.border} p-4 mb-6`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"✅"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Pannello Sbloccato"}),e.jsx("div",{className:`text-sm ${s.subtext}`,children:"Accesso completo alle impostazioni"})]})]}),e.jsx("button",{type:"button",className:`${s.btnGhost} w-full sm:w-auto`,onClick:p,children:"🔒 Blocca Pannello"})]})}),e.jsx(I,{courts:(a==null?void 0:a.courts)||[],onChange:E,T:s}),e.jsxs("div",{className:`rounded-2xl ${s.cardBg} ${s.border} p-3`,onKeyDown:l=>{l.key==="Enter"&&l.preventDefault()},children:[e.jsx("div",{className:"font-medium mb-2",children:"Prenotazioni — Parametri"}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:`text-xs ${s.subtext}`,children:"Minuti slot"}),e.jsx("input",{type:"number",value:j.slotMinutes,onChange:l=>N(o=>({...o,slotMinutes:Number(l.target.value)})),className:s.input})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:`text-xs ${s.subtext}`,children:"Apertura (ora)"}),e.jsx("input",{type:"number",value:j.dayStartHour,onChange:l=>N(o=>({...o,dayStartHour:Number(l.target.value)})),className:s.input})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:`text-xs ${s.subtext}`,children:"Chiusura (ora)"}),e.jsx("input",{type:"number",value:j.dayEndHour,onChange:l=>N(o=>({...o,dayEndHour:Number(l.target.value)})),className:s.input})]})]}),e.jsxs("div",{className:"mt-4 rounded-xl p-3 border border-white/10",children:[e.jsx("div",{className:"font-medium mb-2",children:"Opzioni per prenotazione (costo fisso)"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"cfg-lighting-enabled",type:"checkbox",checked:!!w.lightingEnabled,onChange:l=>N(o=>({...o,addons:{...o.addons,lightingEnabled:l.target.checked}}))}),e.jsx("label",{htmlFor:"cfg-lighting-enabled",className:"cursor-pointer",children:"Abilita Illuminazione"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${s.subtext}`,children:"Costo Illuminazione"}),e.jsx("input",{type:"number",className:`${s.input} w-28`,value:w.lightingFee||0,onChange:l=>N(o=>({...o,addons:{...o.addons,lightingFee:Number(l.target.value)||0}}))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"cfg-heating-enabled",type:"checkbox",checked:!!w.heatingEnabled,onChange:l=>N(o=>({...o,addons:{...o.addons,heatingEnabled:l.target.checked}}))}),e.jsx("label",{htmlFor:"cfg-heating-enabled",className:"cursor-pointer",children:"Abilita Riscaldamento"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${s.subtext}`,children:"Costo Riscaldamento"}),e.jsx("input",{type:"number",className:`${s.input} w-28`,value:w.heatingFee||0,onChange:l=>N(o=>({...o,addons:{...o.addons,heatingFee:Number(l.target.value)||0}}))})]})]}),e.jsxs("div",{className:`text-xs ${s.subtext} mt-2`,children:["Nota: l’",e.jsx("b",{children:"Illuminazione"})," e il ",e.jsx("b",{children:"Riscaldamento"})," sono opzioni per prenotazione (prezzo fisso, non a tempo)."]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{type:"button",className:s.btnPrimary,onClick:v,children:"Salva parametri"}),e.jsx("button",{type:"button",className:s.btnGhost,onClick:k,children:"Ripristina default"})]})]}),e.jsx(R,{T:s,leagueId:t,setState:c,cloudMsg:n,setCloudMsg:u}),e.jsxs("div",{className:`text-xs ${s.subtext} mt-3`,children:["I dati sono salvati ",e.jsx("b",{children:"in locale"})," (localStorage) e, se configurato, ",e.jsx("b",{children:"anche su Firestore"})," ","nel documento ",e.jsxs("code",{children:["leagues/",t]}),"."]})]}):e.jsx("div",{className:`rounded-2xl ${s.cardBg} ${s.border} p-4 mb-6`,children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s.text} mb-2 block`,children:"🔑 Password Amministratore"}),e.jsx("input",{type:"password",value:r,onChange:l=>g(l.target.value),placeholder:"Inserisci password",className:`${s.input} w-full`}),e.jsx("div",{className:`text-xs ${s.subtext} mt-1`,children:"Contatta l'amministratore per la password"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:e.jsx("button",{type:"submit",className:`${s.btnPrimary} flex-1`,children:"🔓 Sblocca Pannello"})})]})})]})}function R({T:a,leagueId:c,setState:d,cloudMsg:t,setCloudMsg:x}){const[m,h]=S.useState([]),[s,n]=S.useState(""),[u,r]=S.useState(!1),[g,b]=S.useState(""),[f,P]=S.useState(()=>{try{return sessionStorage.getItem("ml-cloud-unlocked")==="1"}catch{return!1}}),L=i=>{var p;if((p=i==null?void 0:i.preventDefault)==null||p.call(i),g==="ParisAdmin85"){P(!0);try{sessionStorage.setItem("ml-cloud-unlocked","1")}catch{}}else alert("Password cloud errata")},E=()=>{P(!1),b("");try{sessionStorage.removeItem("ml-cloud-unlocked")}catch{}};async function C(){r(!0);try{const{listLeagues:i}=await B(async()=>{const{listLeagues:v}=await import("./index-N3-yNM-x.js").then(k=>k.w);return{listLeagues:v}},__vite__mapDeps([0,1,2,3,4])),p=await i();h(p),x(`✅ Trovati ${p.length} backup su Firebase`)}catch(i){x(`❌ Errore caricamento lista backup: ${(i==null?void 0:i.message)||i}`)}finally{r(!1)}}async function j(){try{const{saveLeague:i}=await B(async()=>{const{saveLeague:v}=await import("./index-N3-yNM-x.js").then(k=>k.w);return{saveLeague:v}},__vite__mapDeps([0,1,2,3,4])),p=JSON.parse(localStorage.getItem("ml-persist")||"{}");await i(c,{...p,_updatedAt:Date.now()}),x(`✅ Salvato su cloud: leagues/${c}`),m.length>0&&C()}catch(i){x(`❌ Errore salvataggio: ${(i==null?void 0:i.message)||i}`)}}async function N(){const i=s||c;try{const{loadLeague:p}=await B(async()=>{const{loadLeague:k}=await import("./index-N3-yNM-x.js").then(w=>w.w);return{loadLeague:k}},__vite__mapDeps([0,1,2,3,4])),v=await p(i);v&&typeof v=="object"?(d(v),x(`✅ Caricato dal cloud: leagues/${i}`)):x("⚠️ Documento non trovato sul cloud")}catch(p){x(`❌ Errore caricamento: ${(p==null?void 0:p.message)||p}`)}}return e.jsx("div",{className:`rounded-2xl ${a.cardBg} ${a.border} p-4 mb-6`,children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold mb-4 flex items-center justify-between",children:[e.jsx("span",{className:"flex items-center gap-2",children:"☁️ Backup Cloud (Firebase)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:`${a.btnGhost} text-xs`,onClick:C,disabled:u,children:u?"⏳ Caricando...":"🔄 Aggiorna Lista"}),e.jsx("button",{type:"button",className:`${a.btnGhost} text-xs`,onClick:E,children:"🔒 Blocca"})]})]}),e.jsxs("div",{className:"space-y-4",children:[t&&e.jsx("div",{className:`p-3 rounded-xl text-sm ${t.includes("❌")?"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200":t.includes("⚠️")?"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200":"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200"}`,children:t}),m.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`text-sm font-medium ${a.text}`,children:"📋 Seleziona Backup da Caricare:"}),e.jsxs("select",{value:s,onChange:i=>n(i.target.value),className:`${a.input} w-full`,children:[e.jsxs("option",{value:"",children:["🔄 Usa League ID corrente (",c,")"]}),m.map(i=>e.jsxs("option",{value:i.id,children:["📁 ",i.id," - ",i.players," giocatori, ",i.matches," partite",i.lastUpdated!=="N/A"&&` (${i.lastUpdated})`]},i.id))]})]}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[e.jsxs("button",{type:"button",className:`${a.btnSecondary} flex items-center justify-center gap-2`,onClick:C,disabled:u,children:["📋 ",u?"Caricando...":"Lista Backup"]}),e.jsx("button",{type:"button",className:`${a.btnPrimary} flex items-center justify-center gap-2`,onClick:j,children:"⬆️ Salva su Cloud"}),e.jsxs("button",{type:"button",className:`${a.btnGhost} flex items-center justify-center gap-2`,onClick:N,children:["⬇️ Carica ",s?"Selezionato":"Corrente"]})]}),e.jsxs("div",{className:`text-xs ${a.subtext} space-y-1`,children:[e.jsxs("div",{children:[e.jsx("b",{children:"League ID Corrente:"})," ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:c})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Backup Selezionato:"})," ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:s||c})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Firebase Project:"})," ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"m-padelweb"})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold mb-4 flex items-center gap-2",children:"🔒 Backup Cloud (Firebase) - Accesso Limitato"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🔐"}),e.jsx("div",{className:"font-semibold mb-2",children:"Pannello Cloud Protetto"}),e.jsx("div",{className:`text-sm ${a.subtext} mb-4`,children:"Inserisci la password amministratore per accedere ai backup Firebase"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${a.text} mb-2 block`,children:"🔑 Password Cloud"}),e.jsx("input",{type:"password",value:g,onChange:i=>b(i.target.value),placeholder:"Password amministratore cloud",className:`${a.input} w-full`})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{type:"submit",className:`${a.btnPrimary} flex-1`,children:"🔓 Sblocca Cloud"})})]})]})})}export{V as E};
