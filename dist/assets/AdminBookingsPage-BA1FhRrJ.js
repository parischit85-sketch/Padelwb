import{j as e,g as we,m as ke,t as De}from"./index-N3-yNM-x.js";import{r as h,b as ue}from"./vendor-CDaM45aE.js";import{S as Me}from"./Section-D1bpE2En.js";import{M as Ce}from"./Modal-DVTCsOa7.js";import{a as Q,e as Se}from"./format-DAEZv7Mi.js";import{g as X,c as de}from"./pricing-C0IGBk9a.js";import{a as $e}from"./router-ClepU2oc.js";import"./firebase-oRQd-T1V.js";function Ie(l,u){return l.getFullYear()===u.getFullYear()&&l.getMonth()===u.getMonth()&&l.getDate()===u.getDate()}function G(l,u=30){const x=new Date(l);x.setSeconds(0,0);const f=x.getMinutes(),o=Math.floor(f/u)*u;return x.setMinutes(o),x}function I(l,u){const x=new Date(l);return x.setMinutes(x.getMinutes()+u),x}function me(l,u,x,f){return l<f&&x<u}function Pe({currentDay:l,onSelectDay:u,T:x}){const[f,o]=h.useState(new Date(l.getFullYear(),l.getMonth(),1)),i=new Date;i.setHours(0,0,0,0);const g=f.getFullYear(),d=f.getMonth(),O=new Date(g,d,1),j=new Date(O);j.setDate(j.getDate()-O.getDay()+1);const m=new Date(j);m.setDate(m.getDate()+41);const H=[];for(let c=new Date(j);c<=m;c.setDate(c.getDate()+1))H.push(new Date(c));const U=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],W=["Lun","Mar","Mer","Gio","Ven","Sab","Dom"],P=()=>{o(new Date(g,d-1,1))},Y=()=>{o(new Date(g,d+1,1))},_=c=>c.getTime()===i.getTime(),S=c=>c.getTime()===l.getTime(),F=c=>c.getMonth()===d,Z=c=>c<i;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{type:"button",onClick:P,className:"w-10 h-10 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center text-xl font-bold transition-colors",children:"←"}),e.jsxs("h4",{className:`text-xl font-bold ${x.text}`,children:[U[d]," ",g]}),e.jsx("button",{type:"button",onClick:Y,className:"w-10 h-10 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center text-xl font-bold transition-colors",children:"→"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:W.map(c=>e.jsx("div",{className:`text-center text-sm font-semibold ${x.subtext} py-2`,children:c},c))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:H.map((c,V)=>{const q=c.getDate(),z=F(c),E=_(c),A=S(c),J=Z(c);return e.jsx("button",{type:"button",onClick:()=>u(c),disabled:J,className:`
                h-12 w-full rounded-lg text-sm font-medium transition-all duration-200
                ${A?"bg-blue-500 text-white shadow-lg dark:bg-emerald-500":E?"bg-blue-100 text-blue-700 border-2 border-blue-300 dark:bg-emerald-100 dark:text-emerald-700 dark:border-emerald-300":z?"hover:bg-gray-200 dark:hover:bg-gray-700 "+x.text:"text-gray-400 dark:text-gray-600"}
                ${J?"opacity-50 cursor-not-allowed":"hover:scale-105"}
              `,children:q},V)})})]})}function ze({state:l,setState:u,players:x,playersById:f,T:o}){var re,ie;const i=(l==null?void 0:l.bookingConfig)||{slotMinutes:30,dayStartHour:8,dayEndHour:23,defaultDurations:[60,90,120],addons:{}},[g,d]=h.useState(()=>G(new Date,i.slotMinutes)),[O,j]=h.useState(!1),m=Array.isArray(l==null?void 0:l.courts)?l.courts:[],H=Array.isArray(l==null?void 0:l.bookings)?l.bookings:[],U=h.useMemo(()=>{const t=Array.isArray(i==null?void 0:i.defaultDurations)?i.defaultDurations:[];return t.includes(90)?90:t.length>0?t[0]:90},[i]),W=()=>d(G(new Date,i.slotMinutes)),P=t=>d(s=>{const n=new Date(s);return n.setDate(n.getDate()+t),n}),Y=new Date(g);Y.setHours(i.dayStartHour,0,0,0);const _=new Date(g);_.setHours(i.dayEndHour,0,0,0);const S=[],F=new Set;if(m.forEach(t=>{t.timeSlots&&t.timeSlots.length>0&&t.timeSlots.forEach(s=>{var n;if((n=s.days)!=null&&n.includes(g.getDay())){const r=parseInt(s.from.split(":")[0])*60+parseInt(s.from.split(":")[1]),N=parseInt(s.to.split(":")[0])*60+parseInt(s.to.split(":")[1]);for(let p=r;p<N;p+=i.slotMinutes)F.add(p)}})}),F.size>0)Array.from(F).sort((s,n)=>s-n).forEach(s=>{const n=new Date(g);n.setHours(Math.floor(s/60),s%60,0,0),S.push(n)});else for(let t=new Date(Y);t<_;t=I(t,i.slotMinutes))S.push(new Date(t));const c=`${(t=>t.charAt(0).toUpperCase()+t.slice(1))(new Intl.DateTimeFormat("it-IT",{weekday:"long"}).format(g))} - ${String(g.getDate()).padStart(2,"0")} ${new Intl.DateTimeFormat("it-IT",{month:"long"}).format(g)} ${g.getFullYear()}`,V=h.useMemo(()=>H.filter(t=>Ie(new Date(t.start),g)).sort((t,s)=>new Date(t.start)-new Date(s.start)),[H,g]),q=h.useMemo(()=>{const t=new Map(m.map(s=>[s.id,[]]));for(const s of V){const n=t.get(s.courtId)||[];n.push(s),t.set(s.courtId,n)}return t},[V,m]),z=h.useMemo(()=>S.map(t=>{const s=m.map(n=>X(t,i,n.id,m).rate);return s.length>0?Math.min(...s):0}),[S,i,m]),E=h.useMemo(()=>Math.min(...z),[z]),A=h.useMemo(()=>Math.max(...z),[z]),J=t=>!isFinite(E)||!isFinite(A)||E===A?.18:.12+(t-E)/(A-E)*.22,T=h.useMemo(()=>[...x].sort((t,s)=>(t.name||"").localeCompare(s.name,"it",{sensitivity:"base"})),[x]),xe=t=>{var s;return((s=f==null?void 0:f[t])==null?void 0:s.name)||""},ge=t=>{const s=(t||"").trim().toLowerCase();if(!s)return null;const n=T.find(r=>r.name.trim().toLowerCase()===s);return(n==null?void 0:n.id)||null},ee=(t,s)=>s&&X(s,i,t,m).isPromo||!1,[te,L]=h.useState(!1),[w,se]=h.useState(null),[a,y]=h.useState({courtId:"",start:null,duration:U,p1Name:"",p2Name:"",p3Name:"",p4Name:"",guest1:"",guest2:"",note:"",bookedBy:"",useLighting:!1,useHeating:!1});function pe(t,s){const n=G(s,i.slotMinutes);se(null),y({courtId:t,start:n,duration:U,p1Name:"",p2Name:"",p3Name:"",p4Name:"",guest1:"",guest2:"",note:"",bookedBy:"",useLighting:!1,useHeating:!1}),L(!0)}function he(t){var N,p,M,k;se(t.id);const s=new Date(t.start),n=(t.players||[]).map(xe),r=t.playerNames&&t.playerNames.length?t.playerNames:n;y({courtId:t.courtId,start:s,duration:t.duration,p1Name:r[0]||"",p2Name:r[1]||"",p3Name:r[2]||"",p4Name:r[3]||"",guest1:((N=t.guestNames)==null?void 0:N[0])||"",guest2:((p=t.guestNames)==null?void 0:p[1])||"",note:t.note||"",bookedBy:t.bookedByName||"",useLighting:!!((M=t.addons)!=null&&M.lighting),useHeating:!!((k=t.addons)!=null&&k.heating)}),L(!0)}function be(t,s,n,r=null){const N=new Date(s),p=I(s,n);return(q.get(t)||[]).find(k=>{if(r&&k.id===r)return!1;const R=new Date(k.start),B=I(new Date(k.start),k.duration);return me(N,p,R,B)})}const ae=h.useRef("");h.useEffect(()=>{var n,r,N;const t=((n=a.p1Name)==null?void 0:n.trim())||"",s=ae.current;(!((r=a.bookedBy)!=null&&r.trim())||((N=a.bookedBy)==null?void 0:N.trim())===s)&&t&&y(p=>({...p,bookedBy:t})),ae.current=t},[a.p1Name]);function ne(){var B;if(!a.courtId||!a.start){alert("Seleziona campo e orario.");return}const t=G(a.start,i.slotMinutes);if(t<new Date){alert("Non puoi prenotare nel passato.");return}const n=w||null;if(be(a.courtId,t,a.duration,n)){alert("Esiste già una prenotazione che si sovrappone su questo campo.");return}const r=[a.p1Name,a.p2Name,a.p3Name,a.p4Name].map(v=>(v||"").trim()).filter(Boolean),N=r.map(ge).filter(Boolean),p=[a.guest1,a.guest2].map(v=>(v||"").trim()).filter(Boolean),M=a.bookedBy&&a.bookedBy.trim()||r[0]||p[0]||"",k=de(t,a.duration,i,{lighting:!!a.useLighting,heating:!!a.useHeating},a.courtId,m),R={courtId:a.courtId,start:t.toISOString(),duration:a.duration,players:N,playerNames:r,guestNames:p,price:k,note:((B=a.note)==null?void 0:B.trim())||"",bookedByName:M,addons:{lighting:!!a.useLighting,heating:!!a.useHeating},status:"booked"};if(w)u(v=>({...v,bookings:(v.bookings||[]).map(C=>C.id===w?{...C,...R,updatedAt:Date.now()}:C)}));else{const v={id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),createdAt:Date.now(),...R};u(C=>({...C,bookings:[...C.bookings||[],v]}))}L(!1)}function oe(t){confirm("Cancellare la prenotazione?")&&u(s=>({...s,bookings:(s.bookings||[]).filter(n=>n.id!==t)}))}const fe=t=>{var s;return((s=m.find(n=>n.id===t))==null?void 0:s.name)||t},Ne=52;function ye(t,s){var le,ce;const n=q.get(t)||[],r=n.find(b=>{const D=new Date(b.start),K=I(new Date(b.start),b.duration);return me(D,K,s,I(s,i.slotMinutes))}),N=n.some(b=>new Date(b.start).getTime()===I(s,i.slotMinutes).getTime());if(!r&&N){const b=s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"relative w-full h-9 rounded-lg ring-1 text-[11px] font-medium bg-gray-300 dark:bg-gray-700 opacity-60 cursor-not-allowed border-dashed border-2 border-gray-400 flex items-center justify-center",title:"Slot non prenotabile: precede una prenotazione",children:e.jsx("span",{className:"absolute inset-0 grid place-items-center text-[11px] opacity-90",children:b})})}if(!r){const b=X(s,i,t,m),D=J(b.rate),K=b.source==="discounted"||b.isPromo,ve=s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsxs("button",{type:"button",onClick:()=>pe(t,s),className:"relative w-full h-9 rounded-lg ring-1 text-[11px] font-medium",style:{background:`rgba(16,185,129,${D})`,borderColor:"rgba(16,185,129,0.35)"},title:b.isPromo?"Fascia Promo":K?"Fascia scontata":"Tariffa standard",children:[K&&e.jsx("span",{className:"absolute top-0.5 right-0.5 px-1.5 py-[1px] rounded-full text-[10px] leading-none",style:{background:"rgba(16,185,129,0.9)",color:"#0b0b0b",border:"1px solid rgba(16,185,129,0.6)"},children:"★ Promo"}),e.jsx("span",{className:"absolute inset-0 grid place-items-center text-[11px] opacity-90",children:ve})]})}const p=new Date(r.start),M=I(p,r.duration);if(!(s.getTime()===p.getTime()))return e.jsx("div",{className:"w-full h-9"});const B=Math.ceil((M-s)/(i.slotMinutes*60*1e3))*Ne-6,v=(r.playerNames&&r.playerNames.length?r.playerNames:(r.players||[]).map(b=>{var D;return((D=f==null?void 0:f[b])==null?void 0:D.name)||"—"})).concat(r.guestNames||[]).slice(0,4),C=e.jsx("span",{className:"text-2xl",children:"💡"}),je=e.jsx("span",{className:"text-2xl",children:"🔥"});return e.jsx("div",{className:"w-full h-9 relative",children:e.jsxs("button",{type:"button",onClick:()=>he(r),className:"absolute left-0 right-0 px-2 py-2 ring-1 text-left text-[13px] font-semibold flex flex-col justify-center",style:{top:0,height:`${B}px`,background:"rgba(220, 38, 127, 0.35)",borderColor:"rgba(220, 38, 127, 0.6)",borderRadius:"8px",overflow:"hidden"},title:`${fe(r.courtId)} — ${p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${r.duration}′) • clicca per modificare`,children:[e.jsxs("div",{className:"absolute left-2 top-2 flex flex-row items-center gap-2 z-20",children:[((le=r.addons)==null?void 0:le.lighting)&&C,((ce=r.addons)==null?void 0:ce.heating)&&je]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1 mt-2",children:[e.jsxs("div",{className:"min-w-0 flex flex-col",children:[e.jsxs("span",{className:"font-bold text-[15px] leading-tight",children:[p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",M.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," • ",Q(r.price)]}),e.jsx("span",{className:"flex items-center gap-2 mt-1",children:e.jsx("div",{className:"text-[10px] font-medium opacity-80 flex flex-wrap gap-1",children:v.map((b,D)=>e.jsx("span",{className:"bg-white/20 px-1 py-0.5 rounded text-[9px] font-medium",children:b},D))})})]}),e.jsxs("div",{className:"shrink-0 text-[13px] opacity-80 font-bold",children:[Math.round(r.duration),"′"]})]}),e.jsxs("div",{className:"text-[12px] opacity-80 truncate",children:["Prenotato da: ",e.jsx("span",{className:"font-semibold",children:r.bookedByName||v[0]||"—"})]}),r.note&&e.jsx("div",{className:"text-[11px] opacity-70 mt-1 truncate",children:r.note})]})})}const $=h.useMemo(()=>!a.start||!a.courtId?null:de(new Date(a.start),a.duration,i,{lighting:a.useLighting,heating:a.useHeating},a.courtId,m),[a.start,a.duration,a.courtId,a.useLighting,a.useHeating,i,m]);return h.useMemo(()=>$==null?null:$/4,[$]),e.jsx(Me,{title:"Gestione Campi",T:o,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`flex flex-col items-center gap-6 mb-6 ${o.cardBg} ${o.border} p-6 rounded-xl shadow-lg`,children:e.jsxs("div",{className:"flex items-center justify-center gap-6",children:[e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-blue-500 hover:bg-blue-600 dark:bg-emerald-500 dark:hover:bg-emerald-600 text-white text-2xl font-bold shadow-lg hover:scale-110 transition-all duration-200 flex items-center justify-center",onClick:()=>P(-1),title:"Giorno precedente",children:"←"}),e.jsx("button",{type:"button",onClick:()=>j(!0),className:"text-3xl font-bold cursor-pointer hover:scale-105 transition-transform bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent dark:from-emerald-400 dark:to-lime-400 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",title:"Clicca per aprire calendario",children:c}),e.jsx("button",{type:"button",className:"w-12 h-12 rounded-full bg-blue-500 hover:bg-blue-600 dark:bg-emerald-500 dark:hover:bg-emerald-600 text-white text-2xl font-bold shadow-lg hover:scale-110 transition-all duration-200 flex items-center justify-center",onClick:()=>P(1),title:"Giorno successivo",children:"→"})]})}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${o.cardBg} ${o.border} rounded-2xl shadow-2xl p-8 max-w-2xl w-full`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:`text-2xl font-bold ${o.text} flex items-center gap-2`,children:"📅 Seleziona data"}),e.jsx("button",{type:"button",onClick:()=>j(!1),className:"w-10 h-10 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center text-2xl font-bold transition-colors",title:"Chiudi",children:"✕"})]}),e.jsx(Pe,{currentDay:g,onSelectDay:t=>{d(t),j(!1)},T:o}),e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{W(),j(!1)},className:`${o.btnPrimary} py-3 text-sm font-semibold flex items-center justify-center gap-2`,children:"🏠 Oggi"}),e.jsx("button",{type:"button",onClick:()=>{P(-1),j(!1)},className:`${o.btnGhost} py-3 text-sm font-medium`,children:"← Ieri"}),e.jsx("button",{type:"button",onClick:()=>{P(1),j(!1)},className:`${o.btnGhost} py-3 text-sm font-medium`,children:"Domani →"})]})]})}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsxs("div",{className:"min-w-[720px] grid gap-2",style:{gridTemplateColumns:`repeat(${m.length}, 1fr)`},children:[m.map(t=>e.jsx("div",{className:`px-2 py-3 text-base font-bold text-center rounded-xl shadow-md mb-2 ${o.cardBg} ${o.border}`,children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:"w-7 h-7 rounded-full bg-blue-400 dark:bg-emerald-400 text-white flex items-center justify-center font-bold shadow",children:t.name[0]}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{children:t.name}),a.start&&ee(t.id,a.start)&&e.jsx("span",{className:"text-xs bg-gradient-to-r from-yellow-400 to-orange-400 text-black px-2 py-0.5 rounded-full font-medium",children:"🏷️ Promo"}),t.hasHeating&&e.jsx("span",{className:"text-xs text-orange-500 dark:text-orange-400 font-medium",children:"🔥 Riscaldato"})]})]})},`hdr_${t.id}`)),S.map((t,s)=>e.jsx(ue.Fragment,{children:m.map(n=>e.jsx("div",{className:`px-0.5 py-0.5 ${o.cardBg} ${o.border} rounded-lg`,children:ye(n.id,t)},n.id+"_"+s))},t.getTime()))]})}),e.jsx(Ce,{open:te,onClose:()=>L(!1),title:w?"Modifica prenotazione":"Nuova prenotazione",T:o,children:a.start?e.jsx("div",{className:"rounded-2xl p-6 shadow-2xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:`text-xs font-semibold ${o.subtext}`,children:"Campo"}),e.jsx("select",{value:a.courtId,onChange:t=>y(s=>({...s,courtId:t.target.value})),className:o.input,children:l.courts.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),a.courtId&&ee(a.courtId,a.start)&&e.jsx("div",{className:"text-xs bg-gradient-to-r from-yellow-400 to-orange-400 text-black px-2 py-1 rounded-lg font-medium inline-flex items-center gap-1 w-fit",children:"🏷️ Fascia Promo attiva"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:`text-xs font-semibold ${o.subtext}`,children:"Inizio"}),e.jsx("input",{type:"time",value:`${String(new Date(a.start).getHours()).padStart(2,"0")}:${String(new Date(a.start).getMinutes()).padStart(2,"0")}`,onChange:t=>{const[s,n]=t.target.value.split(":").map(Number),r=new Date(a.start);r.setHours(s,n,0,0),y(N=>({...N,start:G(r,i.slotMinutes)}))},className:o.input})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:`text-xs font-semibold ${o.subtext}`,children:"Durata"}),e.jsx("select",{value:a.duration,onChange:t=>y(s=>({...s,duration:Number(t.target.value)})),className:o.input,children:(i.defaultDurations||[60,90,120]).map(t=>e.jsxs("option",{value:t,children:[t," minuti"]},t))})]}),e.jsxs("div",{className:"flex items-center gap-3 sm:col-span-2",children:[((re=i.addons)==null?void 0:re.lightingEnabled)&&e.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.useLighting,onChange:t=>y(s=>({...s,useLighting:t.target.checked}))}),e.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-emerald-400",children:"Illuminazione"}),e.jsxs("span",{className:`text-xs ${o.subtext}`,children:["+",Q(i.addons.lightingFee||0)]})]}),((ie=i.addons)==null?void 0:ie.heatingEnabled)&&(()=>{const t=m.find(s=>s.id===a.courtId);return(t==null?void 0:t.hasHeating)&&e.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.useHeating,onChange:s=>y(n=>({...n,useHeating:s.target.checked}))}),e.jsx("span",{className:"text-sm font-medium text-purple-600 dark:text-lime-400",children:"Riscaldamento"}),e.jsxs("span",{className:`text-xs ${o.subtext}`,children:["+",Q(i.addons.heatingFee||0)]})]})})(),e.jsxs("div",{className:"ml-auto font-bold text-lg text-blue-700 dark:text-emerald-400",children:["Totale: ",$==null?"—":Q($),$!=null&&e.jsxs("span",{className:`ml-3 text-xs ${o.subtext}`,children:["/ giocatore: ",Se($/4)]})]})]}),e.jsx("datalist",{id:"players-list",children:T.map(t=>e.jsx("option",{value:t.name},t.id))}),e.jsx("div",{className:"sm:col-span-2 grid sm:grid-cols-2 gap-4",children:[["p1Name","Giocatore 1"],["p2Name","Giocatore 2"],["p3Name","Giocatore 3"],["p4Name","Giocatore 4"]].map(([t,s])=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:`text-xs font-semibold ${o.subtext}`,children:s}),e.jsx("input",{list:"players-list",value:a[t],onChange:n=>y(r=>({...r,[t]:n.target.value})),className:o.input,placeholder:"Digita nome o scegli"})]},t))}),e.jsxs("div",{className:"sm:col-span-2 grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:`text-xs font-semibold ${o.subtext}`,children:"Ospite 1 (nome libero)"}),e.jsx("input",{value:a.guest1,onChange:t=>y(s=>({...s,guest1:t.target.value})),className:o.input,placeholder:"Es. Mario (ospite)"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:`text-xs font-semibold ${o.subtext}`,children:"Ospite 2 (nome libero)"}),e.jsx("input",{value:a.guest2,onChange:t=>y(s=>({...s,guest2:t.target.value})),className:o.input,placeholder:"Es. Luca (ospite)"})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:`text-xs font-semibold ${o.subtext}`,children:"Prenotazione a nome di"}),e.jsx("input",{value:a.bookedBy,onChange:t=>y(s=>({...s,bookedBy:t.target.value})),className:o.input,placeholder:"Es. Andrea Paris"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:`text-xs font-semibold ${o.subtext}`,children:"Note"}),e.jsx("input",{value:a.note,onChange:t=>y(s=>({...s,note:t.target.value})),className:o.input,placeholder:"Es. Lezioni, torneo, ecc."})]}),e.jsxs("div",{className:"sm:col-span-2 gap-2 flex-wrap mt-2 hidden md:flex",children:[e.jsx("button",{type:"button",onClick:ne,className:o.btnPrimary,children:w?"Aggiorna prenotazione":"Conferma prenotazione"}),e.jsx("button",{type:"button",onClick:()=>L(!1),className:o.btnGhost,children:"Annulla"}),w&&e.jsx("button",{type:"button",onClick:()=>oe(w),className:"bg-gradient-to-r from-rose-500 to-rose-600 text-white font-bold px-6 py-2 rounded-xl shadow-lg hover:scale-105 transition",children:"Elimina prenotazione"})]}),e.jsx("div",{className:"sm:col-span-2 h-24 md:hidden"})]})}):e.jsx("div",{className:`text-center py-8 text-lg ${o.subtext}`,children:"Seleziona uno slot libero nella griglia."})}),te&&a.start&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed bottom-24 left-4 right-4 z-[99999] flex gap-3 md:hidden bg-white/95 dark:bg-gray-900/95 backdrop-blur-md p-3 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>L(!1),className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-4 rounded-xl shadow-lg transition-all duration-200 hover:scale-105",children:"❌ Annulla"}),e.jsxs("button",{type:"button",onClick:ne,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white font-bold py-4 rounded-xl shadow-lg transition-all duration-200 hover:scale-105",children:["✅ ",w?"Aggiorna":"Conferma"]})]}),w&&e.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-[99999] md:hidden",children:e.jsx("button",{type:"button",onClick:()=>oe(w),className:"bg-gradient-to-r from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700 text-white font-bold px-8 py-3 rounded-full shadow-2xl transition-all duration-200 hover:scale-105 border border-rose-300",children:"🗑️ Elimina"})})]})]}):e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),e.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900",children:"Caricamento..."}),e.jsx("p",{className:"text-gray-500",children:"Caricamento configurazione campi in corso..."})]})})})}function Oe(){const l=$e(),{state:u,setState:x,derived:f,playersById:o,loading:i}=we(),{clubMode:g}=ke(),d=ue.useMemo(()=>De(),[]);return i||!u?e.jsxs("div",{className:`text-center py-12 ${d.cardBg} ${d.border} rounded-xl m-4`,children:[e.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),e.jsx("h3",{className:`text-lg font-medium mb-2 ${d.text}`,children:"Caricamento..."}),e.jsx("p",{className:`${d.subtext}`,children:"Caricamento configurazione campi in corso..."})]}):g?e.jsx(ze,{T:d,state:u,setState:x,players:f.players,playersById:o}):e.jsxs("div",{className:`text-center py-12 ${d.cardBg} ${d.border} rounded-xl m-4`,children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),e.jsx("h3",{className:`text-xl font-bold mb-2 ${d.text}`,children:"Modalità Club Richiesta"}),e.jsx("p",{className:`${d.subtext} mb-4`,children:"Per accedere alla gestione campi, devi prima sbloccare la modalità club nella sezione Extra."}),e.jsx("button",{onClick:()=>l("/extra"),className:`${d.btnPrimary} px-6 py-3`,children:"Vai a Extra per sbloccare"})]})}export{Oe as default};
