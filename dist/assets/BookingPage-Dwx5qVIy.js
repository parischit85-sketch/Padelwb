import{j as e,u as Ce,g as Ee,t as Ie}from"./index-CCbUoBqx.js";import{r,b as ze}from"./vendor-CDaM45aE.js";import{s as Me,i as J,a as Z,b as w,c as Te}from"./Badge-B6nENP5m.js";import{c as A,g as He}from"./pricing-C0IGBk9a.js";import{loadActiveUserBookings as _e}from"./cloud-bookings-DgNjAbQJ.js";import"./firebase-oRQd-T1V.js";import"./router-ClepU2oc.js";const B={xs:"p-1",sm:"p-2",md:"p-4",elementMb:"mb-3"},p={h1:"text-3xl font-bold",h2:"text-2xl font-bold",h3:"text-xl font-semibold",body:"text-base",bodySm:"text-sm",bodyXs:"text-xs",label:"text-xs uppercase tracking-wide font-medium",medium:"font-medium"},S={flexBetween:"flex items-center justify-between",flexCenter:"flex items-center justify-center",grid3:"grid grid-cols-1 md:grid-cols-3",grid4:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4"},L={success:"text-emerald-500",error:"text-rose-500",warning:"text-amber-500",info:"text-blue-500"},je={card:"shadow-[0_0_0_1px_rgba(0,0,0,0.02)] shadow-sm",cardHover:"shadow-[0_0_0_1px_rgba(0,0,0,0.04)] shadow-md"},G={md:"rounded-md",xl:"rounded-xl",xxl:"rounded-2xl"},Oe={normal:"transition-all duration-200 ease-in-out"},P={card:s=>`${G.xxl} ${s.cardBg} ${s.border} ${B.md} ${je.card}`,cardHover:s=>`${G.xxl} ${s.cardBg} ${s.border} ${B.md} ${je.cardHover} ${Oe.normal}`,sectionHeader:s=>`${S.flexBetween} ${B.elementMb}`,sectionTitle:s=>`${p.h3} ${s.neonText}`,btnVariants:{primary:s=>s.btnPrimary,ghost:s=>s.btnGhost,ghostSm:s=>s.btnGhostSm},input:s=>s.input,statCard:s=>`${P.card(s)} text-center`,listItem:s=>`${G.xl} ${s.cardBg} ${s.border} ${B.sm} ${S.flexBetween}`,badge:s=>`inline-flex items-center ${B.xs} ${G.md} ${p.bodyXs} ${p.medium}`,skeleton:"animate-pulse bg-gray-200 rounded"};function Re(s){return{card:P.card(s),cardHover:P.cardHover(s),sectionHeader:P.sectionHeader(s),sectionTitle:P.sectionTitle(s),flexBetween:S.flexBetween,flexCenter:S.flexCenter,grid3:S.grid3,grid4:S.grid4,h1:`${p.h1} ${s.text}`,h2:`${p.h2} ${s.text}`,h3:`${p.h3} ${s.text}`,body:`${p.body} ${s.text}`,bodySm:`${p.bodySm} ${s.subtext}`,label:`${p.label} ${s.subtext}`,btnPrimary:s.btnPrimary,btnGhost:s.btnGhost,btnGhostSm:s.btnGhostSm,input:s.input,success:L.success,error:L.error,warning:L.warning,info:L.info}}function Le({user:s,T:y,state:o,setState:C}){var ce,me,xe,he,ge,ue;Re(y);const m=(o==null?void 0:o.bookingConfig)||{slotMinutes:30,dayStartHour:8,dayEndHour:23,defaultDurations:[60,90,120],addons:{}},g=Array.isArray(o==null?void 0:o.courts)?o.courts:[],ee=r.useRef(null),F=r.useRef(null),[i,te]=r.useState(""),[d,U]=r.useState(""),[l,E]=r.useState(null),[u,ye]=r.useState(60),[I,Ne]=r.useState(!0),[k,se]=r.useState(!1),[f,Y]=r.useState(!1),[Ge,ve]=r.useState(""),[Fe,we]=r.useState(""),[b,Q]=r.useState([]),[z,W]=r.useState(""),[ae,N]=r.useState(!1),[Se,ne]=r.useState(!1),[ke,re]=r.useState(!1),[M,v]=r.useState([]),[Ue,T]=r.useState([]),[Ye,H]=r.useState([]),[_,q]=r.useState(!1),[V,j]=r.useState(null);r.useEffect(()=>{Me(!!(s!=null&&s.uid),s),(async()=>{try{const a=await w();v(a),s?await ie():(T([]),H([]))}catch{}})()},[s]);const ie=async()=>{if(!s){T([]),H([]);return}try{if(s.uid){const t=await _e(s.uid);H(t),T(t)}}catch{T([]),H([])}};r.useEffect(()=>{let t=!1;return(async()=>{try{const n=await w(),c=$e((o==null?void 0:o.bookings)||[]),x=new Map;for(const h of[...n,...c])x.set(h.id,h);t||v(Array.from(x.values()))}catch{}})(),()=>{t=!0}},[o==null?void 0:o.bookings,o==null?void 0:o._rev]);const $e=t=>Array.isArray(t)?t.map(a=>{const n=new Date(a.start),c=n.toISOString().split("T")[0],x=String(n.getHours()).padStart(2,"0"),h=String(n.getMinutes()).padStart(2,"0");return{id:a.id||`${a.courtId}-${a.start}`,courtId:a.courtId,courtName:"",date:c,time:`${x}:${h}`,duration:a.duration||60,status:a.status||"booked"}}):[],X=(t,a=300)=>{t!=null&&t.current&&setTimeout(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},a)};r.useEffect(()=>{if(!i){const t=new Date,a=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0");te(`${a}-${n}-${c}`)}},[i]),r.useEffect(()=>{l&&!l.hasHeating&&f&&Y(!1)},[l,f]),r.useEffect(()=>{d&&setTimeout(()=>{X(F,100)},100)},[d]);const O=r.useCallback((t,a,n)=>J(t,a,n,u,M),[u,M]),De=r.useMemo(()=>{const t=[],a=["DOM","LUN","MAR","MER","GIO","VEN","SAB"];for(let n=0;n<7;n++){const c=new Date;c.setDate(c.getDate()+n);const x=c.getFullYear(),h=String(c.getMonth()+1).padStart(2,"0"),$=String(c.getDate()).padStart(2,"0"),D=`${x}-${h}-${$}`;t.push({date:D,dayName:a[c.getDay()],dayNumber:c.getDate(),monthName:c.toLocaleDateString("it-IT",{month:"short"}),isToday:n===0})}return t},[]),le=r.useMemo(()=>{const t=[],a=m.dayStartHour||8,n=m.dayEndHour||23,c=m.slotMinutes||30,x=new Date,h=new Date().toISOString().split("T")[0];for(let $=a;$<n;$++)for(let D=0;D<60;D+=c){const K=`${String($).padStart(2,"0")}:${String(D).padStart(2,"0")}`;if(i===h&&new Date(`${i}T${K}:00`)<=x)continue;const be=g.filter(fe=>O(fe.id,i,K)),pe=be.length>0;(!I||pe)&&t.push({time:K,isAvailable:pe,availableCourts:be.length,totalCourts:g.length})}return t},[i,u,M,g,O,I,m]),Ae=(t,a)=>a&&He(a,m,t,g).isPromo||!1,oe=async()=>{if(!s){j({type:"error",text:"Devi effettuare il login per prenotare un campo"});return}if(!i||!d||!l){j({type:"error",text:"Seleziona data, orario e campo"});return}if(!J(l.id,i,d,u,M)){re(!0),setTimeout(()=>{re(!1)},3e3);const a=await w();v(a);return}q(!0),j(null);try{const a={courtId:l.id,courtName:l.name,date:i,time:d,duration:u,lighting:!!k,heating:!!f,price:A(new Date(`${i}T${d}:00`),u,m,{lighting:!!k,heating:!!f},l.id,g),userPhone:"",notes:"",players:[s.displayName||s.email,...b.map(x=>x.name)]},n=await Te(a,s);if(!n){j({type:"error",text:"Errore nel salvare la prenotazione. Potrebbe essere giÃ  stata prenotata da qualcun altro."}),q(!1);const x=await w();v(x);return}const c=await w();if(v(c),await ie(),o&&C){const x={id:n.id,courtId:n.courtId,start:new Date(`${n.date}T${n.time}:00`).toISOString(),duration:n.duration,players:[],playerNames:b.map(h=>h.name),guestNames:b.map(h=>h.name),price:n.price,note:n.notes||"",bookedByName:n.bookedBy||"",addons:{lighting:!!n.lighting,heating:!!n.heating},status:"booked",createdAt:Date.now()};C(h=>({...h,bookings:[...h.bookings||[],x]}))}ne(!0),setTimeout(()=>{ne(!1)},3e3),U(""),E(null),se(!1),Y(!1),ve(""),we(""),Q([]),W(""),N(!1),j({type:"success",text:`Prenotazione confermata! Campo ${l==null?void 0:l.name} il ${new Date(i).toLocaleDateString("it-IT")} alle ${d}`})}catch{j({type:"error",text:"Errore durante la prenotazione. Riprova."})}finally{q(!1)}},Be=async t=>{if(!t.isAvailable)return;try{const n=await w();if(v(n),!g.some(x=>J(x.id,i,t.time,u,n))){j({type:"error",text:"Questo orario Ã¨ appena stato prenotato. Seleziona un altro slot."});return}}catch(n){console.warn("Errore nell'aggiornamento delle prenotazioni:",n)}U(t.time),X(F,800);const a=g.filter(n=>O(n.id,i,t.time));a.length===1&&(E(a[0]),N(!0))},de=()=>{z.trim()&&b.length<3&&(Q([...b,{id:Date.now(),name:z.trim()}]),W(""))},Pe=t=>{Q(b.filter(a=>a.id!==t))},R=l&&i&&d?A(new Date(`${i}T${d}:00`),u,m,{lighting:k,heating:f},l.id,g):0;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b px-4 py-3 sm:hidden",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Prenota Campo"})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[V&&e.jsx("div",{className:`mb-6 p-3 sm:p-4 rounded-lg text-sm ${V.type==="error"?"bg-red-100 text-red-800 border border-red-200":"bg-emerald-100 text-emerald-800 border border-emerald-200"}`,children:V.text}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-3 sm:p-6 mb-4 sm:mb-6",children:[e.jsx("h2",{className:"font-semibold text-gray-900 mb-3 sm:mb-4 text-sm sm:text-base",children:"Seleziona il giorno"}),e.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"flex gap-2 pb-2",style:{minWidth:"max-content"},children:De.slice(0,10).map(t=>e.jsxs("button",{onClick:()=>{te(t.date),U(""),E(null),X(ee,200)},className:`flex-shrink-0 p-2 sm:p-3 rounded-lg border text-center transition-all min-w-[60px] sm:min-w-[80px] ${i===t.date?"bg-blue-500 text-white border-blue-500 shadow-md":"bg-white border-gray-200 hover:border-gray-300 hover:bg-gray-50 active:bg-gray-100"}`,children:[e.jsx("div",{className:"text-xs font-medium mb-1",children:t.dayName}),e.jsx("div",{className:"text-base sm:text-lg font-bold",children:t.dayNumber}),e.jsx("div",{className:"text-xs opacity-75",children:t.monthName})]},t.date))})})]}),i&&e.jsxs("div",{ref:ee,className:"bg-white rounded-lg shadow-sm border p-3 sm:p-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 sm:mb-4 gap-3",children:[e.jsx("h2",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:"Seleziona l'orario"}),e.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:t=>Ne(t.target.checked),className:"rounded text-blue-500"}),e.jsx("span",{className:"text-gray-600",children:"Solo orari disponibili"})]})]}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 lg:grid-cols-8 gap-2",children:le.map(t=>e.jsxs("button",{onClick:()=>Be(t),disabled:!t.isAvailable,className:`p-3 sm:p-3 rounded-lg border text-center transition-all relative min-h-[56px] touch-manipulation ${d===t.time?"bg-blue-500 text-white border-blue-500 shadow-md":t.isAvailable?"bg-white border-gray-200 hover:border-blue-300 hover:bg-blue-50 cursor-pointer active:bg-blue-100":"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("div",{className:"font-medium text-sm sm:text-base",children:t.time}),!t.isAvailable&&e.jsx("div",{className:"text-xs mt-1",children:"Occupato"})]},t.time))}),le.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:I?"Nessun orario disponibile per questo giorno":"Nessun orario configurato"})]}),d&&e.jsxs("div",{ref:F,className:"bg-white rounded-lg shadow-sm border p-3 sm:p-6 mb-4 sm:mb-6",children:[e.jsx("h2",{className:"font-semibold text-gray-900 mb-3 sm:mb-4 text-sm sm:text-base",children:"Prenota un campo"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:g.filter(t=>O(t.id,i,d)).map(t=>e.jsx("div",{onClick:()=>{E(t),N(!0)},className:"border rounded-lg p-3 sm:p-4 hover:shadow-md transition-all cursor-pointer hover:border-blue-300 active:bg-gray-50 touch-manipulation",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:t.name}),t.premium&&e.jsx(Z,{variant:"warning",size:"xs",T:y,children:"Premium"}),i&&d&&Ae(t.id,new Date(`${i}T${d}:00`))&&e.jsx(Z,{variant:"success",size:"xs",T:y,children:"ðŸ·ï¸ Promo"})]}),t.features&&t.features.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:t.features.map((a,n)=>e.jsx(Z,{variant:"default",size:"xs",T:y,children:a},n))})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:[A(new Date(`${i}T${d}:00`),90,m,{},t.id,g),"â‚¬"]}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"90 minuti"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[(A(new Date(`${i}T${d}:00`),90,m,{},t.id,g)/4).toFixed(1),"â‚¬ a persona"]})]})]})},t.id))})]})]}),ae&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50 p-0 sm:p-4 backdrop-fade",children:e.jsxs("div",{className:"bg-white w-full h-auto max-h-[95vh] sm:max-w-md sm:max-h-[90vh] sm:rounded-lg rounded-t-2xl sm:rounded-t-lg flex flex-col slide-up-mobile sm:animate-none shadow-2xl",children:[e.jsx("div",{className:"flex justify-center pt-2 pb-1 sm:hidden",children:e.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),e.jsx("div",{className:"px-4 py-3 sm:p-6 border-b flex-shrink-0 touch-select-none",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Conferma Prenotazione"}),e.jsx("button",{onClick:()=>N(!1),className:"w-8 h-8 sm:w-6 sm:h-6 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 touch-manipulation tap-highlight-transparent text-gray-500 hover:text-gray-700",children:e.jsx("span",{className:"text-lg sm:text-base",children:"âœ•"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 sm:p-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-xl mb-6 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"ðŸŽ¾"})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:l.name})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-500",children:"ðŸ“…"}),e.jsx("span",{children:new Date(i).toLocaleDateString("it-IT",{weekday:"short",day:"numeric",month:"short"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-500",children:"ðŸ•"}),e.jsx("span",{children:d})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-500",children:"â±ï¸"}),e.jsxs("span",{children:[u," min"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-3 text-gray-900",children:"Durata partita"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[60,90,120].map(t=>{const a=A(new Date(`${i}T${d}:00`),t,m,{lighting:k,heating:f},l.id,g),n=(a/4).toFixed(1);return e.jsxs("button",{onClick:()=>ye(t),className:`p-4 rounded-xl border-2 text-center transition-all touch-manipulation ${u===t?"bg-blue-500 text-white border-blue-500 shadow-lg scale-105":"bg-white border-gray-200 hover:border-blue-300 hover:bg-blue-50 active:bg-blue-100"}`,children:[e.jsxs("div",{className:"font-bold text-lg",children:[t,"min"]}),e.jsxs("div",{className:"text-lg font-bold mt-1",children:[a,"â‚¬"]}),e.jsxs("div",{className:"text-xs opacity-75 mt-1",children:[n,"â‚¬/persona"]})]},t)})})]}),(((ce=m.addons)==null?void 0:ce.lightingEnabled)||((me=m.addons)==null?void 0:me.heatingEnabled))&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold mb-3 text-gray-900",children:"Servizi Extra"}),e.jsxs("div",{className:"space-y-3",children:[((xe=m.addons)==null?void 0:xe.lightingEnabled)&&e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 touch-manipulation",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:t=>se(t.target.checked),className:"rounded w-5 h-5 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Illuminazione"}),e.jsxs("div",{className:"text-xs text-gray-600",children:["+",((he=m.addons)==null?void 0:he.lightingFee)||0,"â‚¬"]})]}),e.jsx("span",{className:"text-2xl",children:"ðŸ’¡"})]}),((ge=m.addons)==null?void 0:ge.heatingEnabled)&&(l==null?void 0:l.hasHeating)&&e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 touch-manipulation",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:t=>Y(t.target.checked),className:"rounded w-5 h-5 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Riscaldamento"}),e.jsxs("div",{className:"text-xs text-gray-600",children:["+",((ue=m.addons)==null?void 0:ue.heatingFee)||0,"â‚¬"]})]}),e.jsx("span",{className:"text-2xl",children:"ðŸ”¥"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 text-gray-900",children:["Giocatori (",1+b.length,"/4)"]}),e.jsx("div",{className:"mb-3 p-4 bg-blue-50 rounded-xl border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"ðŸ‘‘"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:(s==null?void 0:s.displayName)||(s==null?void 0:s.email)}),e.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Organizzatore"})]})]})}),e.jsx("div",{className:"space-y-2 mb-4",children:b.map((t,a)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"ðŸ‘¤"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Giocatore ",a+2]})]}),e.jsx("button",{onClick:()=>Pe(t.id),className:"w-8 h-8 bg-red-100 hover:bg-red-200 text-red-600 rounded-full flex items-center justify-center touch-manipulation transition-colors",children:e.jsx("span",{className:"text-sm",children:"âœ•"})})]},t.id))}),b.length<3&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:z,onChange:t=>W(t.target.value),onKeyDown:t=>t.key==="Enter"&&de(),placeholder:"Nome nuovo giocatore",className:"flex-1 p-3 border-2 border-gray-200 rounded-xl text-sm focus:border-blue-500 focus:outline-none"}),e.jsx("button",{onClick:de,disabled:!z.trim(),className:"px-6 py-3 bg-blue-500 text-white rounded-xl text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation hover:bg-blue-600 transition-colors",children:"Aggiungi"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-xl border border-green-200 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Totale partita"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[R,"â‚¬"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Costo per persona"}),e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[(R/4).toFixed(1),"â‚¬"]})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-green-200",children:e.jsx("div",{className:"text-xs text-green-700 font-medium",children:"ðŸ’° Pagamento in loco"})})]})]}),e.jsx("div",{className:"p-4 sm:p-6 border-t bg-white flex-shrink-0 lg:hidden",children:e.jsx("div",{className:"h-24"})}),e.jsx("div",{className:"p-4 sm:p-6 border-t bg-white flex-shrink-0 hidden lg:block",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-4 px-4 border-2 border-gray-300 rounded-xl text-sm font-semibold hover:bg-gray-50 touch-manipulation transition-colors",children:"Annulla"}),e.jsx("button",{onClick:oe,disabled:_||!s,className:"flex-2 py-4 px-6 bg-blue-500 text-white rounded-xl text-sm font-semibold hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation transition-colors shadow-lg",children:_?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Prenotando..."]}):`Conferma - ${R}â‚¬`})]})})]})}),ae&&l&&i&&d&&e.jsx("div",{className:"lg:hidden fixed bottom-24 left-4 right-4 z-[99999]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 backdrop-blur-md bg-white/90 border border-gray-200/50 text-gray-700 py-3 px-4 rounded-xl font-medium text-sm transition-all shadow-lg hover:bg-white/95",children:"Annulla"}),e.jsx("button",{onClick:oe,disabled:_||!s,className:"flex-1 backdrop-blur-md bg-blue-600/90 text-white py-3 px-4 rounded-xl font-medium text-sm transition-all shadow-lg hover:bg-blue-600/95 disabled:opacity-50 disabled:cursor-not-allowed",children:_?e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Prenotando..."})]}):`Conferma ${R}â‚¬`})]})}),Se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-sm w-full text-center animate-bounce",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-green-500 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Prenotazione Confermata! ðŸŽ¾"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"La tua prenotazione Ã¨ stata registrata con successo"}),e.jsx("div",{className:"mt-4 text-xs text-gray-400",children:"Questa finestra si chiuderÃ  automaticamente"})]})}),ke&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-sm w-full text-center animate-bounce",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-500 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Slot giÃ  prenotato! âš ï¸"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Questo orario Ã¨ giÃ  stato prenotato da qualcun altro. Seleziona un altro orario."}),e.jsx("div",{className:"mt-4 text-xs text-gray-400",children:"Questa finestra si chiuderÃ  automaticamente"})]})})]})}function Ze(){const{user:s}=Ce(),{state:y,setState:o}=Ee(),C=ze.useMemo(()=>Ie(),[]);return e.jsx(Le,{T:C,user:s,state:y,setState:o})}export{Ze as default};
