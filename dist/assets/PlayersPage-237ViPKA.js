import{D as d,j as e,k,g as C,m as R,t as A}from"./index-N3-yNM-x.js";import{r as g,b as w}from"./vendor-CDaM45aE.js";import{S as E}from"./Section-D1bpE2En.js";import{b as F}from"./names-DeuIsqgk.js";import{a as P}from"./router-ClepU2oc.js";import"./firebase-oRQd-T1V.js";function G({state:n,setState:x,onOpenStats:r,playersById:c,T:t}){const[i,m]=g.useState(""),[u,N]=g.useState(""),[j,f]=g.useState(String(d)),v=Array.isArray(n==null?void 0:n.players)?n.players:[],b=g.useMemo(()=>[...v].sort(F),[v]),y=()=>{const s=i.trim(),a=u.trim();if(!s||!a)return;const l=`${s} ${a}`.trim(),h=Number(j||d)||d;x(o=>{const $=Array.isArray(o==null?void 0:o.players)?o.players:[];return{...o||{players:[],matches:[]},players:[...$,{id:k(),name:l,baseRating:h,rating:h}]}}),m(""),N(""),f(String(d))},p=s=>{confirm("Rimuovere il giocatore?")&&x(a=>{const l=Array.isArray(a==null?void 0:a.players)?a.players:[];return{...a||{players:[],matches:[]},players:l.filter(h=>h.id!==s)}})};return e.jsxs(E,{title:"Giocatori",T:t,children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),y()},className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:`text-xs ${t.subtext} mb-1`,children:"Nome"}),e.jsx("input",{value:i,onChange:s=>m(s.target.value),placeholder:"Nome",className:`${t.input} w-full`})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:`text-xs ${t.subtext} mb-1`,children:"Cognome"}),e.jsx("input",{value:u,onChange:s=>N(s.target.value),placeholder:"Cognome",className:`${t.input} w-full`})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("label",{className:`text-xs ${t.subtext} mb-1`,children:"Ranking iniziale"}),e.jsx("input",{type:"number",value:j,onChange:s=>f(s.target.value),className:`${t.input} w-full`})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",className:`${t.btnPrimary} w-full sm:w-auto px-6`,children:"Aggiungi Giocatore"})})]})]}),e.jsx("div",{className:"space-y-3",children:b.length===0?e.jsxs("div",{className:`text-center py-8 ${t.cardBg} ${t.border} rounded-xl`,children:[e.jsx("div",{className:"text-4xl mb-2",children:"👥"}),e.jsx("div",{className:`text-sm ${t.subtext}`,children:"Nessun giocatore presente."}),e.jsx("div",{className:`text-xs ${t.subtext} mt-1`,children:"Aggiungi il primo giocatore sopra per iniziare"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block lg:hidden space-y-3",children:b.map(s=>{var l;const a=((l=c==null?void 0:c[s.id])==null?void 0:l.rating)??s.rating??d;return e.jsxs("div",{className:`rounded-xl ${t.cardBg} ${t.border} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{type:"button",onClick:()=>r==null?void 0:r(s.id),className:"font-semibold text-lg hover:opacity-80 transition truncate flex-1 text-left",children:s.name}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-blue-600 dark:text-blue-400",children:Number(a).toFixed(2)}),e.jsx("div",{className:`text-xs ${t.subtext}`,children:"Ranking"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>r==null?void 0:r(s.id),className:`${t.btnSecondary} flex-1 py-2 text-sm`,children:"📊 Statistiche"}),e.jsx("button",{type:"button",onClick:()=>p(s.id),className:"px-4 py-2 text-sm bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:"🗑️"})]})]},s.id)})}),e.jsx("div",{className:"hidden lg:grid lg:grid-cols-2 gap-3",children:b.map(s=>{var l;const a=((l=c==null?void 0:c[s.id])==null?void 0:l.rating)??s.rating??d;return e.jsxs("div",{className:`rounded-xl ${t.cardBg} ${t.border} p-3 flex items-center justify-between`,children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("button",{type:"button",onClick:()=>r==null?void 0:r(s.id),className:"font-medium hover:opacity-80 transition truncate block",children:s.name}),e.jsxs("div",{className:`text-xs ${t.subtext}`,children:["Ranking: ",Number(a).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>r==null?void 0:r(s.id),className:t.link,children:"Statistiche"}),e.jsx("button",{type:"button",onClick:()=>p(s.id),className:"text-rose-500 hover:opacity-80 text-sm",children:"Elimina"})]})]},s.id)})}),e.jsx("div",{className:"block lg:hidden mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:`text-center text-sm ${t.subtext}`,children:["📊 Totale giocatori: ",e.jsx("span",{className:"font-semibold",children:b.length})]})})]})})]})}function _(){const n=P(),{state:x,setState:r,playersById:c}=C(),{clubMode:t}=R(),i=w.useMemo(()=>A(),[]),m=u=>{n(`/stats?player=${u}`)};return t?e.jsx(G,{T:i,state:x,setState:r,onOpenStats:m,playersById:c}):e.jsxs("div",{className:`text-center py-12 ${i.cardBg} ${i.border} rounded-xl m-4`,children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),e.jsx("h3",{className:`text-xl font-bold mb-2 ${i.text}`,children:"Modalità Club Richiesta"}),e.jsx("p",{className:`${i.subtext} mb-4`,children:"Per accedere alla gestione giocatori, devi prima sbloccare la modalità club nella sezione Extra."}),e.jsx("button",{onClick:()=>n("/extra"),className:`${i.btnPrimary} px-6 py-3`,children:"Vai a Extra per sbloccare"})]})}export{_ as default};
