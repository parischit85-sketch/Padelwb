import{e as D,j as e,f as q,u as G,g as T,t as _}from"./index-N3-yNM-x.js";import{r as f,b as I}from"./vendor-CDaM45aE.js";import{q as E,r as F,n as H,m as K,v as J,w as Q,x as X}from"./firebase-oRQd-T1V.js";import{B as U,a as k,g as Y}from"./Badge-CHwFnf4s.js";import{M as Z}from"./Modal-DVTCsOa7.js";import{a as R}from"./router-ClepU2oc.js";import"./cloud-bookings-DZXqcMc1.js";async function W(){try{const s={timestamp:new Date().toISOString(),version:"2.1.0",type:"automatic",data:{}};(await E(F(D,"leagues"))).forEach(c=>{s.data[c.id]=c.data()});const l=`auto-backup-${Date.now()}`;return await H(K(D,"backups",l),s),console.log("ðŸ”¥âœ… Backup Firebase creato:",l),{success:!0,backupId:l,data:s}}catch(s){return console.error("âŒ Errore backup Firebase:",s),{success:!1,error:s.message}}}async function ee(){try{const s=await E(J(F(D,"backups"),Q("timestamp","desc"))),n=[];return s.docs.slice(30).forEach(l=>{n.push(l.ref)}),await Promise.all(n.map(l=>X(l))),console.log(`ðŸ§¹ Eliminati ${n.length} backup vecchi`),{success:!0,deleted:n.length}}catch(s){return console.error("âŒ Errore cleanup:",s),{success:!1,error:s.message}}}let C=null;function se(s=24){return C&&clearInterval(C),W(),C=setInterval(async()=>{(await W()).success&&Math.random()<.1&&await ee()},s*60*60*1e3),console.log(`ðŸ”„ Backup automatico Firebase avviato (ogni ${s}h)`),C}const L=({onProfileClick:s,onBackupClick:n})=>e.jsxs("button",{onClick:s,className:"bg-white ring-1 ring-black/10 hover:ring-black/20 p-5 rounded-2xl transition-all duration-200 hover:shadow-md hover:-translate-y-0.5 group text-center w-full",children:[e.jsx("div",{className:"bg-slate-50 text-slate-700 ring-1 ring-slate-200 w-11 h-11 rounded-2xl flex items-center justify-center mb-3 group-hover:scale-105 transition-transform mx-auto",children:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"7",r:"4",strokeWidth:1.5}),e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2",strokeWidth:1.5})]})}),e.jsx("h3",{className:"font-bold text-base mb-1 text-gray-900 dark:text-white text-center",children:"Profilo"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 text-center",children:"Gestisci il tuo account"})]});function te({className:s=""}){const{isInstallable:n,isInstalled:l,installApp:c,browserInfo:t,installInstructions:a}=q(),[i,x]=f.useState(!1),[p,d]=f.useState(!1);if(f.useEffect(()=>{localStorage.getItem("pwa-banner-dismissed")&&x(!0)},[]),l||i||!n)return null;const v=async()=>{if(a!=null&&a.show){d(!0);return}try{await c()&&x(!0)}catch(g){console.error("Install failed:",g),a!=null&&a.show&&d(!0)}},b=()=>{x(!0),localStorage.setItem("pwa-banner-dismissed","true"),setTimeout(()=>{localStorage.removeItem("pwa-banner-dismissed")},7*24*60*60*1e3)},o=()=>t!=null&&t.isIOS?"ðŸ“± Installa su iPhone/iPad":t!=null&&t.isAndroid?"ðŸ¤– Installa su Android":t!=null&&t.isFirefox?"ðŸ¦Š Installa con Firefox":t!=null&&t.isMobile?"ðŸ“± Installa App Mobile":"ðŸ’» Installa App Desktop";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg ${s}`,children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"font-semibold text-white mb-1",children:o()}),e.jsx("p",{className:"text-blue-100 text-sm",children:t!=null&&t.isMobile?"Aggiungila alla home screen per accesso rapido":"Installala sul desktop per un'esperienza app nativa"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("button",{onClick:v,className:"bg-white text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-lg text-sm font-semibold transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),a!=null&&a.show?"Come installare":"Installa ora"]}),e.jsx("button",{onClick:b,className:"text-blue-100 hover:text-white p-2 transition-colors",title:"Nascondi banner",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})}),p&&(a==null?void 0:a.show)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[99999] p-4",children:e.jsx("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-3xl",children:a.icon||"ðŸ“±"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:a.title||"Installa App"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Segui questi semplici passaggi:"}),a.instructions&&e.jsx("div",{className:"text-left space-y-4 mb-8",children:a.instructions.map((g,h)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0",children:h+1}),e.jsx("p",{className:"text-sm text-gray-700 pt-1",children:g})]},h))}),t&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-6",children:e.jsxs("p",{className:"text-xs text-gray-600 text-center",children:["Browser: ",t.isChrome?"Chrome":t.isFirefox?"Firefox":t.isEdge?"Edge":t.isSafari?"Safari":t.isOpera?"Opera":t.isSamsung?"Samsung Internet":"Altro",t.isMobile?" Mobile":""]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 px-4 rounded-lg font-medium transition-colors",children:"Ho capito"}),t&&!t.isIOS&&!t.isFirefox&&e.jsx("button",{onClick:async()=>{d(!1),await c()},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Prova Auto-Install"})]})]})})})]})}function ae({booking:s,isOpen:n,onClose:l,state:c,T:t}){var N;if(!s)return null;const a=(c==null?void 0:c.courts)||U.courts,i=a==null?void 0:a.find(u=>u.id===s.courtId),x=new Date(s.date),p=new Date(`${s.date}T${s.time}:00`),d=new Date,v=x.toDateString()===new Date().toDateString(),b=x.toDateString()===new Date(Date.now()+864e5).toDateString(),o=p<d,g=p>d&&p<=new Date(d.getTime()+24*60*60*1e3);let h;o?h="Passata":v?h="Oggi":b?h="Domani":h=x.toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long",year:"numeric"});const j=p-d,r=Math.floor(j/(1e3*60*60)),m=Math.floor(j%(1e3*60*60)/(1e3*60));return e.jsx(Z,{open:n,onClose:l,title:"Dettaglio Prenotazione",T:t,size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl p-6 text-white overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:e.jsx("span",{className:"text-2xl",children:"ðŸŸï¸"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:(i==null?void 0:i.name)||"Campo Padel"}),e.jsx("p",{className:"text-white/80",children:(i==null?void 0:i.location)||"Padel Club"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white/80 text-sm",children:"ID Prenotazione"}),e.jsxs("div",{className:"font-mono text-xs bg-white/20 px-2 py-1 rounded",children:[(N=s.id)==null?void 0:N.substring(0,8),"..."]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[o&&e.jsx(k,{variant:"secondary",size:"sm",T:t,children:"Completata"}),v&&!o&&e.jsx(k,{variant:"warning",size:"sm",T:t,children:"Oggi"}),g&&e.jsx(k,{variant:"success",size:"sm",T:t,children:"Prossima"}),s.confirmed&&e.jsx(k,{variant:"primary",size:"sm",T:t,children:"Confermata"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“…"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Data e Orario"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Data:"}),e.jsx("div",{className:"font-medium",children:h})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Orario:"}),e.jsx("div",{className:"font-medium",children:s.time})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Durata:"}),e.jsxs("div",{className:"font-medium",children:[s.duration||60," minuti"]})]}),!o&&j>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tempo rimanente:"}),e.jsxs("div",{className:"font-medium text-blue-600",children:[r>0&&`${r}h `,m,"min"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-xl",children:"ðŸŸï¸"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Campo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Nome:"}),e.jsx("div",{className:"font-medium",children:(i==null?void 0:i.name)||`Campo ${s.courtId}`})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tipo:"}),e.jsx("div",{className:"font-medium",children:(i==null?void 0:i.type)||"Padel Standard"})]}),(i==null?void 0:i.features)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Caratteristiche:"}),e.jsx("div",{className:"text-sm",children:i.features.join(", ")})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-xl",children:"ðŸ‘¥"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Giocatori"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Numero giocatori:"}),e.jsx("div",{className:"font-medium",children:s.players||1})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Organizzatore:"}),e.jsx("div",{className:"font-medium",children:s.userName||s.userEmail})]}),s.participants&&s.participants.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Partecipanti:"}),e.jsx("div",{className:"text-sm",children:s.participants.map(u=>u.name||u.email).join(", ")})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-xl",children:"ðŸ’°"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Pagamento"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Prezzo totale:"}),e.jsxs("div",{className:"font-medium text-lg text-green-600",children:["â‚¬",s.price||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stato pagamento:"}),e.jsx("div",{className:"font-medium",children:s.paymentStatus==="paid"?e.jsx("span",{className:"text-green-600",children:"âœ… Pagato"}):s.paymentStatus==="pending"?e.jsx("span",{className:"text-yellow-600",children:"â³ In attesa"}):e.jsx("span",{className:"text-gray-600",children:"ðŸ’³ Da confermare"})})]}),s.paymentMethod&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Metodo:"}),e.jsx("div",{className:"font-medium",children:s.paymentMethod})]})]})]})]}),s.notes&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Note"})]}),e.jsx("p",{className:"text-gray-700",children:s.notes})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"â„¹ï¸"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Informazioni Utili"})]}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("p",{children:"â€¢ Arriva 10 minuti prima dell'orario prenotato"}),e.jsx("p",{children:"â€¢ Porta racchette e palline (se necessario)"}),e.jsx("p",{children:"â€¢ In caso di maltempo, contatta la struttura"}),(i==null?void 0:i.phone)&&e.jsxs("p",{children:["â€¢ Tel. struttura: ",e.jsx("span",{className:"font-medium",children:i.phone})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[!o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg transition-colors font-medium",children:"ðŸ“§ Condividi Dettagli"}),e.jsx("button",{className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white py-3 px-4 rounded-lg transition-colors font-medium",children:"âœï¸ Modifica"}),e.jsx("button",{className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-lg transition-colors font-medium",children:"âŒ Cancella"})]}),o&&e.jsx("button",{className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg transition-colors font-medium",children:"â­ Lascia Recensione"})]})]})})}function O({user:s,state:n,T:l,compact:c=!1}){const[t,a]=f.useState([]),[i,x]=f.useState(!0),[p,d]=f.useState(null),[v,b]=f.useState(!1),o=R();f.useEffect(()=>{if(!s){a([]),x(!1);return}(async()=>{x(!0);try{const m=await Y(s,!0);a(m)}catch(m){console.error("Errore nel caricamento prenotazioni:",m),a([])}finally{x(!1)}})()},[s,n]);const g=r=>{d(r),b(!0)},h=()=>{b(!1),d(null)},j=t;return i?e.jsxs("div",{className:`${l.cardBg} ${l.border} p-6 rounded-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ“…"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-32 mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})]})]}),e.jsx("div",{className:"h-6 w-8 bg-gray-200 rounded animate-pulse"})]}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(r=>e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-8 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})]})]})},r))}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsx("div",{className:"h-10 bg-gray-200 rounded-lg animate-pulse"})})]}):!s||t.length===0?e.jsx("div",{className:`${l.cardBg} ${l.border} p-6 rounded-xl`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ“…"}),e.jsx("h3",{className:`font-semibold mb-2 ${l.text}`,children:"Nessuna Prenotazione"}),e.jsx("p",{className:`text-sm ${l.subtext} mb-4`,children:"Non hai prenotazioni attive"}),e.jsx("button",{onClick:()=>o("/booking"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Prenota Ora"})]})}):e.jsxs("div",{className:`${l.cardBg} ${l.border} p-6 rounded-xl`,children:[e.jsx("h3",{className:`font-semibold text-sm ${l.text} mb-2`,children:"Le Tue Prenotazioni"}),e.jsx("div",{className:"overflow-x-auto pb-2 -mx-6 px-6 sm:mx-0 sm:px-0",children:e.jsxs("div",{className:"flex gap-2 w-max sm:grid sm:grid-cols-1 sm:gap-3 sm:w-full",children:[t.map(r=>{var S,P,z,A;const m=(n==null?void 0:n.courts)||U.courts,N=m==null?void 0:m.find(w=>w.id===r.courtId),u=new Date(r.date),B=u.toDateString()===new Date().toDateString(),V=u.toDateString()===new Date(Date.now()+864e5).toDateString(),M=u.toLocaleDateString("it-IT",{weekday:"short"});let y;return B?y="Oggi":V?y="Domani":y=`${M.charAt(0).toUpperCase()+M.slice(1)} ${u.getDate()}/${(u.getMonth()+1).toString().padStart(2,"0")}`,e.jsxs("div",{onClick:()=>g(r),className:`bg-white dark:bg-gray-800 hover:shadow-md p-3 rounded-lg border cursor-pointer transition-all group
                  min-w-[220px] h-28 sm:min-w-0 sm:h-auto flex-shrink-0 sm:flex-shrink
                  hover:border-blue-300 dark:hover:border-blue-600 transform hover:scale-102 flex flex-col justify-between`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-tight mb-1",children:y}),e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white leading-none mb-1",children:r.time.substring(0,5)}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(N==null?void 0:N.name)||"Padel 1"," â€¢ ",r.duration||60,"min"]})]}),B&&e.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"text-[10px] text-gray-600 dark:text-gray-400 truncate mb-1",children:[r.bookedBy&&e.jsx("span",{className:"font-medium",children:r.bookedBy}),r.players&&r.players.length>0&&e.jsxs("span",{children:[r.bookedBy?" + ":"",r.players.slice(0,2).map((w,$)=>e.jsxs("span",{children:[w.name||w,$<r.players.slice(0,2).length-1?", ":""]},$)),r.players.length>2&&e.jsxs("span",{children:[" +",r.players.length-2," altri"]})]})]}),e.jsxs("div",{className:"flex -space-x-0.5",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center text-xs font-bold text-white border border-white",children:e.jsx("span",{className:"text-[9px]",children:((S=s==null?void 0:s.displayName)==null?void 0:S.charAt(0).toUpperCase())||"U"})}),(((P=r.players)==null?void 0:P.length)||0)>0&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center text-xs font-bold text-white border border-white",children:e.jsxs("span",{className:"text-[8px]",children:["+",r.players.length]})}),(((z=r.players)==null?void 0:z.length)||0)+1<4&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-200 dark:bg-gray-600 border border-white flex items-center justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full"})})]})]}),e.jsxs("div",{className:"text-right",children:[r.price&&e.jsxs("div",{className:"text-xs font-bold text-green-600 dark:text-green-400",children:["â‚¬",r.price]}),e.jsx("div",{className:"text-[9px] text-gray-500",children:(((A=r.players)==null?void 0:A.length)||0)+1<4?"Aperta":"Completa"})]})]})]},r.id)}),e.jsxs("div",{onClick:()=>o("/booking"),className:`bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 
              hover:from-blue-100 hover:to-blue-200 dark:hover:from-blue-800/30 dark:hover:to-blue-700/30
              border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg cursor-pointer
              min-w-[220px] h-28 flex-shrink-0 flex flex-col items-center justify-center
              transition-all hover:border-blue-400 dark:hover:border-blue-500 group`,children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 text-center",children:"Prenota Campo"})]})]})}),j.length>0&&e.jsx("div",{className:"flex justify-center mt-2 sm:hidden",children:e.jsxs("div",{className:"flex gap-0.5",children:[j.slice(0,Math.min(6,j.length)).map((r,m)=>e.jsx("div",{className:"w-0.5 h-0.5 rounded-full bg-gray-300"},m)),j.length>6&&e.jsx("div",{className:"w-0.5 h-0.5 rounded-full bg-blue-500"})]})}),e.jsx("div",{className:"hidden sm:block mt-4 pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>o("/booking"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors text-sm font-medium",children:"Nuova Prenotazione"})}),e.jsx(ae,{booking:p,isOpen:v,onClose:h,state:n,T:l})]})}function xe(){const s=R(),{user:n}=G(),{state:l}=T(),c=I.useMemo(()=>_(),[]);I.useEffect(()=>(n&&!window._firebaseBackupStarted&&(window._firebaseBackupStarted=!0,se(6)),()=>{}),[n]);const t=[{title:"Prenota Campo",description:"Prenota subito un campo disponibile",icon:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",strokeWidth:1.5}),e.jsx("path",{d:"M8 3v4M16 3v4M3 9h18",strokeWidth:1.5}),e.jsx("path",{d:"M12 13v6M9 16h6",strokeWidth:1.5})]}),action:()=>s("/booking"),iconWrap:"bg-emerald-50 text-emerald-600 ring-1 ring-emerald-200"},{title:"Classifica",description:"Visualizza ranking RPA",icon:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M5 6h14v2a5 5 0 01-5 5h-4a5 5 0 01-5-5V6z",strokeWidth:1.5}),e.jsx("path",{d:"M8 21h8M10 21v-3a2 2 0 012-2 2 2 0 012 2v3",strokeWidth:1.5}),e.jsx("path",{d:"M19 8a3 3 0 003-3V4h-3",strokeWidth:1.5}),e.jsx("path",{d:"M5 8a3 3 0 01-3-3V4h3",strokeWidth:1.5})]}),action:()=>s("/classifica"),iconWrap:"bg-amber-50 text-amber-600 ring-1 ring-amber-200"},{title:"Statistiche",description:"Analisi avanzate e grafici",icon:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M3 20h18",strokeWidth:1.5}),e.jsx("path",{d:"M4 14l4-4 4 3 5-6 3 2",strokeWidth:1.5}),e.jsx("circle",{cx:"8",cy:"10",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"12",cy:"13",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"17",cy:"7",r:"1",fill:"currentColor"})]}),action:()=>s("/stats"),iconWrap:"bg-indigo-50 text-indigo-600 ring-1 ring-indigo-200"}];return e.jsxs("div",{className:"space-y-1",children:[e.jsx(te,{}),e.jsxs("div",{className:"hidden lg:grid lg:grid-cols-2 lg:gap-4 lg:items-start",children:[e.jsx("div",{children:e.jsx(O,{user:n,state:l,T:c})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-white",children:"Azioni Rapide"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.map(a=>e.jsxs("button",{onClick:a.action,className:"bg-white ring-1 ring-black/10 hover:ring-black/20 p-5 rounded-2xl transition-all duration-200 hover:shadow-md hover:-translate-y-0.5 group text-center",children:[e.jsx("div",{className:`${a.iconWrap} w-11 h-11 ${c.borderLg} flex items-center justify-center mb-3 group-hover:scale-105 transition-transform mx-auto`,children:a.icon}),e.jsx("h3",{className:"font-bold text-base mb-1 text-gray-900 dark:text-white text-center",children:a.title}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 text-center",children:a.description})]},a.title)),e.jsx(L,{onProfileClick:()=>s("/profile"),onBackupClick:()=>s("/extra")})]})]})]}),e.jsxs("div",{className:"lg:hidden space-y-2",children:[e.jsx("div",{children:e.jsx(O,{user:n,state:l,T:c,compact:!0})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Azioni Rapide"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.map(a=>e.jsxs("button",{onClick:a.action,className:"bg-white ring-1 ring-black/10 hover:ring-black/20 p-5 rounded-2xl transition-all duration-200 hover:shadow-md hover:-translate-y-0.5 group text-center",children:[e.jsx("div",{className:`${a.iconWrap} w-11 h-11 ${c.borderLg} flex items-center justify-center mb-3 group-hover:scale-105 transition-transform mx-auto`,children:a.icon}),e.jsx("h3",{className:"font-bold text-base mb-1 text-gray-900 dark:text-white text-center",children:a.title}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 text-center",children:a.description})]},a.title)),e.jsx(L,{onProfileClick:()=>s("/profile"),onBackupClick:()=>s("/extra")})]})]})]})]})}export{xe as default};
